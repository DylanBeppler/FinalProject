<html>
<body>

  <div *ngIf="selectedContent && !editContent" class="content-details">
    <div class="content">
      <div class="content-container">
        <img src="{{ selectedContent.imageUrl }}" class="rounded-corners img-hover-effect selected-content-img-size"
          alt="{{ selectedContent.name }}" />
        <h2>{{ selectedContent.name }}</h2>
        <p>{{ selectedContent.description }}</p>
        <p>{{ selectedContent.contentCategory.name }}</p>
        <small>Posted on: {{ selectedContent.createdDate | date }}</small>
        <br>
      </div>
     </div>
    <br />
    <button class="btn btn-primary" (click)="selectedContent = null">
      Go Back
    </button>
    <button class="btn btn-primary" *ngIf="loggedInUser && selectedContent.user.id === loggedInUser.id"
      (click)="editContent = selectedContent">
      Edit Content
    </button>
    <button class="btn btn-danger" *ngIf="loggedInUser && selectedContent.user.id === loggedInUser.id"
      (click)="deleteContent(selectedContent.id); selectedContent = null">
      Delete Content
    </button>
    <hr>
    <div class="content" *ngFor="let comment of allComments">
      <div class="content-container">
        <h2>{{ comment.user.username }}</h2>
        <p>{{ comment.message }}</p>
        <small>{{ comment.updatedDate | date }}</small>
        <img src="{{ comment.user.avatarUrl }}" class="rounded-corners img-hover-effect selected-content-img-size"
          alt="{{ selectedContent.name }}" />
      </div>
      <!-- <button class="btn btn-primary" (click)=" setEditComment(comment); openCommentDialog('500ms', '500ms');">Update
        Comment</button> -->
      <button class="btn btn-danger" *ngIf="loggedInUser && selectedContent.user.id === loggedInUser.id"
        (click)="deleteComment(selectedContent.id, comment.id)">
        Delete Comment
      </button>
    </div>
    <hr/>
  </div>


  <ng-template #noContent>
    <p>No latest content available.</p>
  </ng-template>


  <div *ngIf="latestContents.length > 0; else noContent"></div>
  <div class="row">
    <div class="col-md-4 mb-3" style="width: 25rem" *ngFor="let content of latestContents">
      <a (click)="selectedContent = content" class="category-link">
      <div class="card category-box rounded-corners img-hover-effect">
        <img class="card-img-top" src="{{ content.imageUrl }}" alt="{{ content.name }}" />
        <div class="card-body">
          <h5 class="card-title">{{ content.name }}</h5>
          <p class="card-text">{{ content.description }}</p>
          <small>Posted on: {{ content.createdDate | date }}</small>
        </div>
      </div>
    </a>
    </div>
  </div>
</body>
  </html>
